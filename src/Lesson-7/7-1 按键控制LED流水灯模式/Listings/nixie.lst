C51 COMPILER V9.60.7.0   NIXIE                                                             08/20/2023 01:45:20 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE NIXIE
OBJECT MODULE PLACED IN .\Objects\nixie.obj
COMPILER INVOKED BY: C:\Program Files\Keil_v5\C51\BIN\C51.EXE lib\nixie.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PR
                    -INT(.\Listings\nixie.lst) OBJECT(.\Objects\nixie.obj)

line level    source

   1          #include "nixie.h"
   2          #include "utilities.h"
   3          #include "REGX52.h"
   4          
   5          /*
   6              数码管显示数字
   7              location:从左到右8个LED编号0~7
   8              number:0x0~0xF
   9          */
  10          static uint8_t numberToNixieSign[] = {0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x
             -7C, 0x39, 0x5E, 0x79, 0x71, 0x00};
  11          void NixieTubeNumberDisplay(uint8_t location, uint8_t number)
  12          {
  13   1          // LED消影
  14   1          Delay1ms();
  15   1          P0 = 0x00;
  16   1      
  17   1          // 反转LED位置，使左边第一个LED从原来的LED8变成LED7
  18   1          location = 7 - location;
  19   1      
  20   1          P2_2 = location & 1;
  21   1          P2_3 = location & 1 << 1;
  22   1          P2_4 = location & 1 << 2;
  23   1      
  24   1          P0 = numberToNixieSign[number];
  25   1      }
  26          /*
  27              数码管显示字母
  28              location:从左到右8个LED编号0~7
  29              alpha:'a'~'z'共26个字母
  30          */
  31          
  32          static uint8_t alphaToNixieSign[] = {0x77, 0x7c, 0x39, 0x5e, 0x79, 0x71, 0x3d, 0x76, 0x0f, 0x0e,
  33                                               0x75, 0x38, 0x37, 0x54, 0x5c, 0x73, 0x67, 0x31, 0x49, 0x78,
  34                                               0x3e, 0x1c, 0x7e, 0x64, 0x6e, 0x59};
  35          void NixieTubeAlphaDisplay(uint8_t location, uint8_t alpha)
  36          {
  37   1          // LED消影
  38   1          Delay1ms();
  39   1          P0 = 0x00;
  40   1      
  41   1          // 反转LED位置，使左边第一个LED从原来的LED8变成LED7
  42   1          location = 7 - location;
  43   1      
  44   1          P2_2 = location & 1;
  45   1          P2_3 = location & 1 << 1;
  46   1          P2_4 = location & 1 << 2;
  47   1      
  48   1          // alpha to id
  49   1          alpha = alpha - 'a' + 0;
  50   1      
  51   1          P0 = alphaToNixieSign[alpha];
  52   1      }

C51 COMPILER V9.60.7.0   NIXIE                                                             08/20/2023 01:45:20 PAGE 2   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     82    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     43       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
